(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{867:function(t,e,n){var content=n(868);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(48).default)("2f328c45",content,!0,{sourceMap:!1})},868:function(t,e,n){var o=n(47),r=n(276),c=n(869),l=n(870);e=o(!1);var d=r(c),h=r(l);e.push([t.i,"html{background-color:#f3f3f7}body,html{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif}.cssTest{color:red}.sort-bar{margin:0 1rem;padding:.3rem .8rem}.van-nav-bar{background:#37363d}.van-nav-bar__title{color:#eee}.van-nav-bar .van-icon{color:grey}.box-bg{background:linear-gradient(45deg,#0bccfd,#4761ff)}.box-bg,.box-imgbg{position:fixed;top:46px;bottom:0;left:0;right:0;overflow:auto}.box-imgbg{background:url("+d+");background-size:cover}.box-imgbg2{background:url("+h+") no-repeat;background-size:cover}.box-mid{position:absolute;width:60%;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center}.menu div{text-align:center;color:#fff;font-size:1.6rem;line-height:1.3;margin:1.5rem;display:inline-block}.menu div:active{opacity:.7}.menu div img{max-width:11rem}.list{position:fixed;top:46px;bottom:0;left:0;right:0;overflow:auto}.list-item{background:#fff;margin:0 1rem 1rem;padding:.8rem;border-radius:.5rem;line-height:1.8;color:#777}.list-item:active{background:#fafafa}.list-item strong{font-size:1.3rem;margin-right:1rem;color:#333}.list-item span{display:inline-block;margin-right:2rem}i{vertical-align:text-top}.e-box{margin:10px 0;padding:20px;height:300px;background:#fff}.ellipsis{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.pagination-box{position:fixed;bottom:2px;width:100%}.no-data{text-align:center;font-size:2rem;line-height:2}.set-course-time{background:#fff;padding:.6rem 1rem;border-radius:5px;width:90%;max-width:25rem;font-size:1.3rem;line-height:1.5}.set-course-time strong{font-size:1.6rem;margin-bottom:1rem;display:block;font-weight:400}.div-center-mid{text-align:center;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.bg-fill{position:absolute;top:0;left:0;right:0;bottom:0}",""]),t.exports=e},869:function(t,e,n){t.exports=n.p+"img/h5-bg.0a3e2c6.png"},870:function(t,e,n){t.exports=n.p+"img/h5-bg2.aececa5.png"},885:function(t,e,n){var content=n(921);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(48).default)("5f92058a",content,!0,{sourceMap:!1})},920:function(t,e,n){"use strict";n(885)},921:function(t,e,n){(e=n(47)(!1)).push([t.i,".chart-box[data-v-2a0a7df2]{width:100%;height:100%}",""]),t.exports=e},930:function(t,e,n){"use strict";n.r(e);n(101);var o=n(150),r=(n(867),{props:["chartData"],data:function(){return{myChart:{},data:[],dataCategory:[],st:null,id:(new Date).getTime()+Math.random()}},mounted:function(){window.addEventListener("resize",function(){this.myChart.resize()}.bind(this)),console.log(this.chartData),this._initChart()},destroyed:function(){clearTimeout(this.st)},methods:{_initChart:function(){var t=this;this.data=this.chartData?this.chartData:[5,6,7],this.dataCategory=["正常出勤","迟到人数","缺勤人数"],this.myChart=this.$echarts.init(document.getElementById(this.id)),this.myChart.setOption({title:{text:"考勤汇总"},legend:{textStyle:{fontSize:12},x:"center",bottom:"2%",data:this.dataCategory},calculable:!0,color:["#5485ff","#ffbf0b","#ff6061"],series:[{name:"考生比例",type:"pie",radius:["40%","60%"],startAngle:90,emphasis:{label:{show:!0}},label:{formatter:"\n{b}\n{c|{c}次}",rich:{c:{lineHeight:22,align:"center"}},position:"center",show:!1},data:function(){var e=[];for(var i in t.dataCategory)e.push({value:t.data[i],name:t.dataCategory[i]});return e}()}]})}}}),c=(n(920),n(23)),l=Object(c.a)(r,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"chart-box",attrs:{id:this.id}})}),[],!1,null,"2a0a7df2",null).exports,d={layout:"h5",mixins:[o.a],components:{EchartsPie:l},data:function(){return{list:[],size:10,chartData:[5,6,7],showChart:!1,absenceStr:"",lateStr:"",actionInfo:{show:!1,title:"标题",description:"这是一段描述信息"},course:[]}},created:function(){},mounted:function(){var t=JSON.parse(window.localStorage.getItem("course"));t?(this.course=t,this.getData()):this.linkToPathRL("/h5/teacher/attendance/")},methods:{viewAbsence:function(){this.actionInfo={show:!0,title:"缺勤人员",description:this.absenceStr}},viewLate:function(){this.actionInfo={show:!0,title:"迟到人员",description:this.lateStr}},getData:function(){var t=this;this.$store.commit("admin/CHANGE_LOADING"),this.$store.dispatch("admin/FIND_ONE_COURSE",{data:{attendancePlanId:this.course.id},cb:function(e){var n=e.data.filter((function(t){return 1===t.attendanceState})),o=e.data.filter((function(t){return 2===t.attendanceState})),r=e.data.filter((function(t){return 0===t.attendanceState}));t.lateStr=0===o.length?"无":"",t.absenceStr=0===r.length?"无":"",o.map((function(e){t.lateStr+=e.studentName+", "})),r.map((function(e){t.absenceStr+=e.studentName+", "})),t.chartData=[n.length,o.length,r.length],t.showChart=!0,t.$store.commit("admin/CHANGE_LOADING")}})}}},h=Object(c.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"h5-page"},[n("van-nav-bar",{attrs:{title:"考勤统计","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)},"click-right":function(t){}}}),t._v(" "),n("div",{staticClass:"list"},[n("van-cell",{attrs:{title:"课程名称",value:t.course.courseName}}),t._v(" "),n("van-cell",{attrs:{title:"时间",value:t.dateFtt("yyyy年MM月dd日",new Date(t.course.startTime))}}),t._v(" "),n("div",{staticClass:"e-box"},[t.showChart?n("echarts-pie",{attrs:{chartData:t.chartData}}):t._e()],1),t._v(" "),n("van-cell",{attrs:{title:"缺勤人员",value:t.absenceStr,"value-class":"ellipsis","is-link":""},on:{click:t.viewAbsence}}),t._v(" "),n("van-cell",{attrs:{title:"迟到人员",value:t.lateStr,"value-class":"ellipsis","is-link":""},on:{click:t.viewLate}}),t._v(" "),n("van-action-sheet",{attrs:{description:t.actionInfo.description,"close-on-click-action":"",title:t.actionInfo.title},model:{value:t.actionInfo.show,callback:function(e){t.$set(t.actionInfo,"show",e)},expression:"actionInfo.show"}})],1)],1)}),[],!1,null,null,null);e.default=h.exports}}]);