(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{376:function(t,e,o){"use strict";e.a={data:function(){return{table:{data:[],columns:[],sort:[],height:100},page:{currentPage:1,pageSizes:[10,20,30,50],pageSize:10,total:200,layout:"total, sizes, prev, pager, next, jumper",show:!1}}},created:function(){var t=this;this.table.height=document.documentElement.clientHeight-230,window.onresize=function(){t.table.height=document.documentElement.clientHeight-230}},methods:{sortChange:function(t){this.table.sort=t,console.log(t)},pageChange:function(t){console.log(t),console.log(this.page.currentPage)}}}},441:function(t,e,o){var content=o(539);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(22).default)("1f0842c7",content,!0,{sourceMap:!1})},538:function(t,e,o){"use strict";o(441)},539:function(t,e,o){var n=o(21)(!1);n.push([t.i,".pagination[data-v-6ea0a3ae]{text-align:right;margin-top:20px}",""]),t.exports=n},577:function(t,e,o){"use strict";o.r(e);o(56),o(33),o(2);var n=o(228),l=o(376),r=o(79),c={layout:"admin",mixins:[l.a,r.a],components:{},data:function(){return{title:"实验评卷",dialogInfo:[],status:0}},mounted:function(){this.getScheduleList()},methods:{getScheduleList:function(){var t=this;this.$store.commit("admin/CHANGE_LOADING"),this.$store.dispatch("teacher/TRAIN_SCHEDULE_LIST",{data:{},cb:function(e){t.table.columns=[{prop:"planDate",label:"实验时间",sortable:!1,formatter:t.formatterDate},{prop:"org.name",label:"班级",sortable:!1},{prop:"org.peopleAmount",label:"学生人数",sortable:!1},{prop:"lab.name",label:"实验室",sortable:!1},{prop:"type",label:"模式",sortable:!1,formatter:t.formatterType}],t.status=0,e.succ&&(t.table.data=e.data),console.log(e.data),t.$store.commit("admin/CHANGE_LOADING")}})},getScheduleScoreById:function(t){var e=this;this.$store.commit("admin/CHANGE_LOADING"),this.$store.dispatch("teacher/GET_SCHEDULE_SCORE",{data:{scheduleId:t},cb:function(t){console.log(t.data),e.table.columns=[{prop:"name",label:"姓名",sortable:!1},{prop:"code",label:"学号",sortable:!1},{prop:"seatCode",label:"座位",sortable:!1},{prop:"score",label:"成绩",sortable:!1}],e.status=1,t.succ&&t.data&&(e.table.data=[],t.data.seats&&t.data.seats.map((function(t){t.student.map((function(o){e.table.data.push({seatCode:t.code,score:t.score,name:o.name,code:o.code,id:t.examHeaderId})}))}))),e.$store.commit("admin/CHANGE_LOADING")}})},goToMarkPoint:function(t){sessionStorage.setItem("mPScheduleId",t),sessionStorage.setItem("mPIndex",0),sessionStorage.removeItem("mpExamHeaderId"),window.open("/admin/teacher/mep/")},lookOutPaper:function(t){sessionStorage.setItem("mpExamHeaderId",t),sessionStorage.removeItem("mPIndex"),sessionStorage.removeItem("mPScheduleId"),window.open("/admin/teacher/mep/"),console.log(t)},formatterDate:function(t,e,o,l){return n.a.dateFtt("yyyy-MM-dd",new Date(o))+" "+t.start},formatterType:function(t,e,o,n){return"0"===o?"训练":"考试"}},computed:{}},d=(o(538),o(13)),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"admin-page"},[o("div",{staticClass:"top"},[o("span",{staticClass:"title"},[t._v(t._s(t.title))])]),t._v(" "),o("div",{staticClass:"action-bar"},[1===t.status?o("span",{on:{click:t.getScheduleList}},[t._v(" ← 返回查看所有课程信息")]):t._e()]),t._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.table.data,border:"","max-height":t.DcSize.height-230},on:{"sort-change":t.sortChange}},[t._l(t.table.columns,(function(t,i){return o("el-table-column",{key:i,attrs:{prop:t.prop,label:t.label,width:t.width,"min-width":t.minWidth,fixed:t.fixed,sortable:t.sortable,formatter:t.formatter}})})),t._v(" "),0===t.status?o("el-table-column",{attrs:{label:"实验名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.papers,(function(e,i){return o("div",{key:i},[t._v(t._s(e&&e.examName))])})),t._v(" "),t._e()]}}],null,!1,3969653449)}):t._e(),t._v(" "),0===t.status?o("el-table-column",{attrs:{label:"操作",width:"200",fixed:"right",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){return t.goToMarkPoint(e.row.id)}}},[t._v("评卷")]),t._v(" "),o("el-button",{attrs:{size:"mini"},on:{click:function(o){return t.getScheduleScoreById(e.row.id)}}},[t._v("查看成绩")])]}}],null,!1,2286340947)}):t._e(),t._v(" "),1===t.status?o("el-table-column",{attrs:{label:"操作",width:"200",fixed:"right",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id?t._e():o("el-button",{attrs:{size:"mini",type:"danger",disabled:""}},[t._v("未交卷")]),t._v(" "),e.row.id?o("el-button",{attrs:{size:"mini"},on:{click:function(o){return t.lookOutPaper(e.row.id)}}},[t._v("查看试卷")]):t._e()]}}],null,!1,919385446)}):t._e()],2),t._v(" "),t.dialogInfo.show?o("el-dialog",{attrs:{title:t.dialogInfo.title,visible:t.dialogInfo.show,width:t.dialogInfo.width},on:{"update:visible":function(e){return t.$set(t.dialogInfo,"show",e)}}},[o(t.dialogInfo.com,{ref:"dialogBox",tag:"component",attrs:{data:t.dialogInfo.data}}),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogInfo.show=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.$refs.dialogBox.onOk()}}},[t._v("确 定")])],1)],1):t._e(),t._v(" "),o("el-confrim",{attrs:{confrimInfo:t.confrimInfo}})],1)}),[],!1,null,"6ea0a3ae",null);e.default=component.exports}}]);