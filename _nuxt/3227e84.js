(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{478:function(e,t,o){var content=o(502);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(23).default)("daf89fd0",content,!0,{sourceMap:!1})},487:function(e,t){e.exports={NVRSERVER:{szIP:"192.168.1.200",szPort:"80",szUsername:"admin",szPassword:"123456Aa"},NVRTESTDATA:{iChannelID:"3",szStartTime:"2020-10-19 16:10:00",szEndTime:"2020-10-19 16:15:37"}}},501:function(e,t,o){"use strict";o(478)},502:function(e,t,o){var r=o(22)(!1);r.push([e.i,'.divPlugin-box[data-v-d585f110]{position:absolute;width:100%;top:0;bottom:75px}.fullScreen-box[data-v-d585f110]{position:fixed;left:0;top:0}.plugin[data-v-d585f110]{position:relative;height:100%;width:100%}.video-control-box[data-v-d585f110]{position:absolute;height:75px;width:100%;bottom:-75px;left:0;z-index:5;background:grey}.video-control-box>.iconfont[data-v-d585f110]{position:absolute;font-size:100px;margin:-50px 0 0 -50px;cursor:pointer;left:50%;top:50%;color:#fff;display:none}.video-control-box>.pause-area[data-v-d585f110]{position:absolute;height:100%;width:100%;cursor:pointer;left:0;top:0;background:transparent;display:none}.video-control-box:hover>.pause-area[data-v-d585f110]{display:block}.video-control-box .control-bar[data-v-d585f110]{position:absolute;height:70px;width:100%;bottom:0;left:0;background:rgba(0,0,0,.5);opacity:1;transition:all .2s;color:#fff}.video-control-box:hover .control-bar[data-v-d585f110]{opacity:1}.control-bar>i[data-v-d585f110]{position:absolute;font-size:40px;cursor:pointer}.control-bar .play-pause[data-v-d585f110]{left:15px;top:15px}.control-bar .full-screen[data-v-d585f110]{right:15px;top:15px}.control-bar .time-warp[data-v-d585f110]{position:absolute;left:70px;top:27px}.control-bar .progress-bar[data-v-d585f110]{height:15px;width:100%;cursor:pointer;position:relative;margin-top:-5px}.progress-bar .progress-bar-line[data-v-d585f110]{top:5px;height:5px;width:100%;padding-right:16px;background:#fff;background:hsla(0,0%,100%,.2);position:absolute}.progress-bar-line .progress-bar-inner[data-v-d585f110]{height:100%;background:#df953a;position:relative}.progress-bar-line .progress-bar-inner[data-v-d585f110]:before{content:"";height:16px;width:16px;left:100%;top:-6px;border-radius:50%;border:5px solid #fff;background:#df953a;position:absolute}.control-bar .speed-change[data-v-d585f110]{position:absolute;right:70px;top:16px;cursor:pointer;line-height:40px;min-width:130px;text-align:center}.control-bar .speed-change[data-v-d585f110]:hover{background:rgba(0,0,0,.5)}.speed-change .speed-list[data-v-d585f110]{position:absolute;right:100%;bottom:0;width:200px;background:rgba(0,0,0,.5);display:none}.control-bar .speed-change:hover .speed-list[data-v-d585f110]{display:block}.speed-change .speed-list span[data-v-d585f110]{display:inline-block;width:80px;text-align:center}.speed-change .speed-list span[data-v-d585f110]:hover{color:#ff8c00;background:hsla(0,0%,100%,.1)}',""]),e.exports=r},510:function(e,t,o){"use strict";var r=o(25),n=(o(266),o(13),o(60),o(61),o(57),o(58),o(31),o(43),o(71),o(72),o(85)),c=o(470),d=o.n(c),l=o(487),f=o.n(l);function h(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var m={props:["WCdata"],mixins:[{data:function(){return{serverData:{szIP:"12.7.1.9",szPort:"443",szUsername:"admin",szPassword:"nb@kk0574"},szInfo:"",g_iWndIndex:0,playbackRate:1,videoData:{szDeviceIdentify:"12.7.1.9_443",iRtspPort:554,iStreamType:1,bZeroChannel:!1,iChannelID:"6",currentTime:"2020-04-08 09:07:15",szStartTime:"2020-04-08 09:07:15",szEndTime:"2020-04-08 09:17:59",bChecked:!1}}},mounted:function(){var e=this;console.log(f.a),this.serverData=f.a.NVRSERVER,this.videoData.szDeviceIdentify=this.serverData.szIP+"_"+this.serverData.szPort,setTimeout((function(){e.initPlugin()}),1e3),setInterval(this.GetOSDTime,500)},beforeDestroy:function(){},methods:{I_Resize:function(){WebVideoCtrl&&WebVideoCtrl.I_Resize(d()(".divPlugin-box").width(),d()(".divPlugin-box").height())},I_FullScreen:function(){WebVideoCtrl&&WebVideoCtrl.I_FullScreen(!0)},I_Pause:function(){WebVideoCtrl&&WebVideoCtrl.I_Pause({iWndIndex:this.g_iWndIndex})},I_Resume:function(){WebVideoCtrl&&WebVideoCtrl.I_Resume({iWndIndex:this.g_iWndIndex})},I_PlaySlow:function(){var e=this;WebVideoCtrl&&WebVideoCtrl.I_PlaySlow({success:function(){e.$message.success("慢放成功！"),e.playbackRate=e.playbackRate/2},error:function(){e.$message.error("慢放失败！")}})},I_PlayFast:function(){var e=this;WebVideoCtrl&&WebVideoCtrl.I_PlayFast({success:function(){e.$message.success("快放成功！"),e.playbackRate=2*e.playbackRate},error:function(){e.$message.error("快放失败！")}})},GetOSDTime:function(){var e=this;if(WebVideoCtrl&&null!=WebVideoCtrl.I_GetWindowStatus(this.g_iWndIndex))WebVideoCtrl.I_GetOSDTime({success:function(t){e.setVideoTimeData(t)},error:function(){}})},initPlugin:function(){var e=this;WebVideoCtrl&&WebVideoCtrl.I_InitPlugin("100%","100%",{bWndFull:!0,iPackageType:2,iWndowType:1,bNoPlugin:!0,cbSelWnd:function(t){var o="当前选择的窗口编号："+e.g_iWndIndex;e.showCBInfo(o),e.logout(),setTimeout((function(){e.login()}),150)},cbDoubleClickWnd:function(t,o){var r="当前放大的窗口编号："+t;o||(r="当前还原的窗口编号："+t),e.showCBInfo(r)},cbEvent:function(t,o,r){2==t?e.showCBInfo("窗口"+o+"回放结束！"):-1==t?e.showCBInfo("设备"+o+"网络错误！"):3001==t&&clickStopRecord(g_szRecordType,o)},cbRemoteConfig:function(){e.showCBInfo("关闭远程配置库！")},cbInitPluginComplete:function(){WebVideoCtrl.I_InsertOBJECTPlugin("divPlugin"),-1!=WebVideoCtrl.I_CheckPluginVersion()||alert("检测到新的插件版本，双击开发包目录里的WebComponentsKit.exe升级！")}}),d()(window).bind({resize:function(){e.I_Resize()}})},logout:function(){var e=this.serverData,t=e.szIP,o=e.szPort;e.szUsername,e.szPassword;if(""!=t&&""!=o){var r=t+"_"+o;WebVideoCtrl&&WebVideoCtrl.I_Logout(r)}},login:function(){var e=this,t=this.serverData,o=t.szIP,r=t.szPort,n=t.szUsername,c=t.szPassword;if(""!=o&&""!=r){var d=o+"_"+r;-1==WebVideoCtrl.I_Login(o,1,r,n,c,{success:function(t){e.showCBInfo(d+" 登录成功！")},error:function(t,o){e.showCBInfo(d+" 登录失败！",t,o),e.$message.error("登录失败！")}})&&this.showCBInfo(d+" 已登录过！")}},preSPB:function(){var e=this;null!=WebVideoCtrl.I_GetWindowStatus(this.g_iWndIndex)?WebVideoCtrl.I_Stop({success:function(){e.startPlayback()}}):this.startPlayback()},startPlayback:function(){var e=this,t=this.videoData,o=t.szDeviceIdentify,r=t.iRtspPort,n=t.iStreamType,c=t.bZeroChannel,d=t.iChannelID,l=t.szStartTime,f=t.szEndTime,h=t.bChecked,v=t.szInfo;if(l=this.videoData.currentTime,null!=o&&!c)if(h){WebVideoCtrl.I_StartPlayback(o,{iRtspPort:r,iStreamType:n,iChannelID:d,szStartTime:l,szEndTime:f,oTransCodeParam:{TransFrameRate:"14",TransResolution:"1",TransBitrate:"19"},success:function(){e.initData(),v="开始回放成功！",e.showCBInfo(o+" "+v)},error:function(t,r){403===t?v="设备不支持Websocket取流！":(v="开始回放失败！",e.$message.error(v)),e.showCBInfo(o+" "+v)}})}else WebVideoCtrl.I_StartPlayback(o,{iRtspPort:r,iStreamType:n,iChannelID:d,szStartTime:l,szEndTime:f,success:function(){e.initData(),v="开始回放成功！",e.showCBInfo(o+" "+v)},error:function(t,r){403===t?v="设备不支持Websocket取流！":(v="开始回放失败！",e.$message.error(v)),e.showCBInfo(o+" "+v)}})},showCBInfo:function(e){this.szInfo=this.szInfo+n.a.dateFtt("yyyy-MM-dd hh:mm:ss  ",new Date)+e+" ---- "}},head:function(){return{script:[{src:"../../../jquery-1.12.4.min.js"},{src:"../../../codebase/encryption/AES.js"},{src:"../../../codebase/encryption/cryptico.min.js"},{src:"../../../codebase/encryption/crypto-3.1.2.min.js"},{src:"../../../codebase/webVideoCtrl.js"}]}}}],components:{},data:function(){return{video:{active:!1,paused:!1,currentTime:""},videoProps:{currentTime:"",duration:""},isFullScreen:!1,mouseOverBTime:""}},mounted:function(){},methods:{_changeSpeed:function(e){if("减速"===e){if(.25===this.playbackRate)return;this.I_PlaySlow()}else{if(8===this.playbackRate)return;this.I_PlayFast()}},_fullScreen:function(e){var t=this,o=document.getElementById("divPlugin-box");document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():o.requestFullscreen&&o.requestFullscreen()||o.mozRequestFullScreen&&o.mozRequestFullScreen()||o.webkitRequestFullscreen&&o.webkitRequestFullscreen()||o.msRequestFullscreen&&o.msRequestFullscreen(),setTimeout((function(){t.I_Resize()}),200)},_play:function(){this.video.paused?this.I_Resume():this.I_Pause(),this.video.paused=!this.video.paused},_MMProgressBar:function(e){this.mouseOverBTime="";var t=this.$refs.progressBar,o=(e.clientX-this.elementPageX(t))/t.offsetWidth*this.videoProps.duration;this.mouseOverBTime=parseInt(o/60).toString().padStart(2,"00")+":"+parseInt(o%60).toString().padStart(2,"00")},_clickProgressBar:function(e){var t=this.$refs.progressBar,o=(e.clientX-this.elementPageX(t))/t.offsetWidth*this.videoProps.duration;o=new Date(this.videoData.szStartTime.replace(/\-/g,"/")).getTime()+1e3*o,this.videoData.currentTime=n.a.dateFtt("yyyy-MM-dd hh:mm:ss",new Date(o)),this.video.paused=!1,this.preSPB()},elementPageX:function(e){return e.offsetParent?e.offsetLeft+this.elementPageX(e.offsetParent):e.offsetLeft},setVideoTimeData:function(time){this.video.currentTime=time;var e=new Date(this.video.currentTime.replace(/\-/g,"/")).getTime()/1e3,t=new Date(this.videoData.szStartTime.replace(/\-/g,"/")).getTime()/1e3,o=new Date(this.videoData.szEndTime.replace(/\-/g,"/")).getTime()/1e3;this.videoProps.currentTime=e-t,this.videoProps.duration=o-t},preSPB_start:function(){this.videoData=Object.assign({},this.videoData,this.WCdata),this.videoData.currentTime=this.videoData.szStartTime,this.preSPB()},initData:function(){this.playbackRate=1,this.video=v(v({},this.video),{},{active:!0,paused:!1})}},computed:{progressBarInnerWidth:function(){return 0===this.videoProps.duration?0:this.videoProps.currentTime/this.videoProps.duration*100+"%"},computedVideoProps:function(){var e=this.videoProps.currentTime>0?this.videoProps.currentTime:0,t=this.videoProps.duration;return{currentTime:e=parseInt(e/60).toString().padStart(2,"00")+":"+parseInt(e%60).toString().padStart(2,"00"),duration:t=parseInt(t/60).toString().padStart(2,"00")+":"+parseInt(t%60).toString().padStart(2,"00")}}}},_=(o(501),o(10)),component=Object(_.a)(m,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"divPlugin-box",class:{"fullScreen-box":e.isFullScreen},attrs:{id:"divPlugin-box"}},[o("div",{staticClass:"plugin",attrs:{id:"divPlugin"}}),e._v(" "),e.video.active?o("div",{staticClass:"video-control-box"},[o("div",{staticClass:"pause-area",on:{click:e._play}}),e._v(" "),e.video.paused?o("i",{staticClass:"iconfont icon-playcircle",on:{click:e._play}}):e._e(),e._v(" "),o("div",{staticClass:"control-bar"},[o("div",{ref:"progressBar",staticClass:"progress-bar",attrs:{title:e.mouseOverBTime},on:{mousemove:e._MMProgressBar,click:e._clickProgressBar}},[o("div",{staticClass:"progress-bar-line"},[o("div",{staticClass:"progress-bar-inner",style:{width:e.progressBarInnerWidth}})])]),e._v(" "),o("i",{staticClass:"iconfont  play-pause",class:{"icon-playcircle":e.video.paused,"icon-pause":!e.video.paused},on:{click:e._play}}),e._v(" "),o("i",{staticClass:"el-icon-full-screen full-screen",on:{click:e._fullScreen}}),e._v(" "),o("span",{staticClass:"time-warp"},[e._v(e._s(e.computedVideoProps.currentTime)+" / "+e._s(e.computedVideoProps.duration))]),e._v(" "),o("div",{staticClass:"speed-change"},[e._v("\n          播放速度 x"+e._s(e.playbackRate)+"\n          "),o("div",{staticClass:"speed-list"},e._l(["减速","加速"],(function(t){return o("span",{key:t,style:{color:t===e.playbackRate?"orange":""},on:{click:function(o){return e._changeSpeed(t)}}},[e._v(e._s(t))])})),0)])])]):e._e()])}),[],!1,null,"d585f110",null);t.a=component.exports},522:function(e,t,o){var content=o(573);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(23).default)("711adee7",content,!0,{sourceMap:!1})},572:function(e,t,o){"use strict";o(522)},573:function(e,t,o){var r=o(22)(!1);r.push([e.i,".video-view[data-v-540e6036]{position:absolute;height:80%;width:60%;right:20px;bottom:20px}",""]),e.exports=r},655:function(e,t,o){"use strict";o.r(t);var r=o(86),n=o(510),c=(o(85),o(487)),d=o.n(c),l={mixins:[r.a],components:{WebControl:n.a},data:function(){return{WC_data:{}}},mounted:function(){this.WC_data=d.a.NVRTESTDATA},methods:{WC_preSPB:function(){this.$refs.webControlTest&&this.$refs.webControlTest.preSPB_start&&this.$refs.webControlTest.preSPB_start()},WC_fast:function(){this.$refs.webControlTest&&this.$refs.webControlTest.I_PlayFast&&this.$refs.webControlTest.I_PlayFast()}},computed:{}},f=(o(572),o(10)),component=Object(f.a)(l,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"loading",rawName:"v-loading",value:e.$store.state.admin.loading,expression:"$store.state.admin.loading"}],staticStyle:{position:"relative",padding:"20px"},style:{height:e.DcSize.height+"px"}},[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.WC_preSPB}},[e._v("开始回放")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.WC_fast}},[e._v("加速播放")]),e._v(" "),o("div",{staticClass:"video-view"},[o("web-control",{ref:"webControlTest",attrs:{WCdata:e.WC_data}})],1)],1)}),[],!1,null,"540e6036",null);t.default=component.exports}}]);