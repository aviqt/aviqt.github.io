(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{867:function(t,e,n){var content=n(868);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(48).default)("2f328c45",content,!0,{sourceMap:!1})},868:function(t,e,n){var o=n(47),r=n(276),c=n(869),l=n(870);e=o(!1);var d=r(c),m=r(l);e.push([t.i,"html{background-color:#f3f3f7}body,html{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif}.cssTest{color:red}.sort-bar{margin:0 1rem;padding:.3rem .8rem}.van-nav-bar{background:#37363d}.van-nav-bar__title{color:#eee}.van-nav-bar .van-icon{color:grey}.box-bg{background:linear-gradient(45deg,#0bccfd,#4761ff)}.box-bg,.box-imgbg{position:fixed;top:46px;bottom:0;left:0;right:0;overflow:auto}.box-imgbg{background:url("+d+");background-size:cover}.box-imgbg2{background:url("+m+") no-repeat;background-size:cover}.box-mid{position:absolute;width:60%;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center}.menu div{text-align:center;color:#fff;font-size:1.6rem;line-height:1.3;margin:1.5rem;display:inline-block}.menu div:active{opacity:.7}.menu div img{max-width:11rem}.list{position:fixed;top:46px;bottom:0;left:0;right:0;overflow:auto}.list-item{background:#fff;margin:0 1rem 1rem;padding:.8rem;border-radius:.5rem;line-height:1.8;color:#777}.list-item:active{background:#fafafa}.list-item strong{font-size:1.3rem;margin-right:1rem;color:#333}.list-item span{display:inline-block;margin-right:2rem}i{vertical-align:text-top}.e-box{margin:10px 0;padding:20px;height:300px;background:#fff}.ellipsis{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.pagination-box{position:fixed;bottom:2px;width:100%}.no-data{text-align:center;font-size:2rem;line-height:2}.set-course-time{background:#fff;padding:.6rem 1rem;border-radius:5px;width:90%;max-width:25rem;font-size:1.3rem;line-height:1.5}.set-course-time strong{font-size:1.6rem;margin-bottom:1rem;display:block;font-weight:400}.div-center-mid{text-align:center;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.bg-fill{position:absolute;top:0;left:0;right:0;bottom:0}",""]),t.exports=e},869:function(t,e,n){t.exports=n.p+"img/h5-bg.0a3e2c6.png"},870:function(t,e,n){t.exports=n.p+"img/h5-bg2.aececa5.png"},884:function(t,e,n){var content=n(919);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(48).default)("50cc81ee",content,!0,{sourceMap:!1})},916:function(t,e,n){t.exports=n.p+"img/people2.ed26fd8.png"},917:function(t,e,n){t.exports=n.p+"img/people1.bb0bb08.png"},918:function(t,e,n){"use strict";n(884)},919:function(t,e,n){(e=n(47)(!1)).push([t.i,".course-info[data-v-3b4f7eb6]{padding-top:1rem;text-align:center;line-height:1.5;font-size:1.5rem;color:#fff;position:relative;overflow:hidden;height:12rem}.course-info div[data-v-3b4f7eb6]{display:inline-block;vertical-align:top;margin:0 2rem 1rem}.course-info img[data-v-3b4f7eb6]{max-height:9rem;margin-top:1rem}.course-info strong[data-v-3b4f7eb6]{font-size:1.8rem;line-height:1.8;margin-top:.2rem;background:linear-gradient(0deg,#fdb43f,#f7e59a);display:inline-block;border-radius:2rem;padding:0 2rem;color:#4177ff;box-shadow:0 3px 3px #333}.sign-info[data-v-3b4f7eb6]{background:hsla(0,0%,100%,.2);border:1px solid #fff;border-radius:.2rem;padding:.5rem 1rem;position:absolute;top:13rem;left:1rem;right:1rem;bottom:0;color:#fff;line-height:1.6}.sign-info strong[data-v-3b4f7eb6]{display:block;text-align:center;font-size:1.5rem}.sign-list[data-v-3b4f7eb6]{position:absolute;top:3rem;left:0;right:0;bottom:1rem;line-height:1.8;overflow:auto;padding:0 2rem}.sign-list span[data-v-3b4f7eb6]{display:inline-block;font-size:1.2rem;width:100%;text-align:center}.sign-list span .button[data-v-3b4f7eb6]{text-align:center;background:linear-gradient(0deg,#fdb43f,#f7e59a);display:inline-block;border-radius:.2rem;padding:0 .5rem;font-size:1.1rem;color:#4177ff;box-shadow:0 3px 3px #333;cursor:pointer}.sign-list span i[data-v-3b4f7eb6]{vertical-align:baseline;vertical-align:initial;background:#3d7aff;border-radius:50%;color:#fff;padding:2px}.sign-list span .late[data-v-3b4f7eb6]{background:#ff8c00}.sign-list span .warning[data-v-3b4f7eb6]{background:red}.sign-list span .success[data-v-3b4f7eb6]{background:#07c160}@media screen and (min-width:1400px){.sign-list span[data-v-3b4f7eb6]{width:50%}}@media screen and (max-width:880px){.course-info div[data-v-3b4f7eb6]{margin:0}}",""]),t.exports=e},943:function(t,e,n){"use strict";n.r(e);n(149),n(63),n(64),n(32),n(122);var o=n(25),r=n(150);n(867);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={layout:"h5",mixins:[r.a],data:function(){return{list:[],size:10,course:[],code:"",getDataSt:null,getCodeSt:null,timeSet:{value:3,show:!1,refreshTime:25}}},created:function(){},mounted:function(){var t=JSON.parse(window.localStorage.getItem("course"));t?(this.course=t,this.getCode(),this.getDataSt=setTimeout(this.getData,1e4)):this.linkToPathRL("/h5/teacher/schedule/")},destroyed:function(){clearInterval(this.getDataSt),clearTimeout(this.getCodeSt)},methods:{showSetRefreshTime:function(){this.timeSet.show=!0},setTime:function(){var t=this;this.$store.commit("admin/SET_LOADING",!0),this.$store.dispatch("admin/SET_COURSE_TIME",{data:{attendancePlanId:this.course.id,timeLength:this.timeSet.value},cb:function(e){"success"===e.msg&&(t.$message.success("操作成功"),t.timeSet.show=!1,t.getCode()),t.$store.commit("admin/SET_LOADING",!1)}})},confrimULT:function(t){var e=this;this.confrimInfo={show:!0,isConfrim:!0,handlEvent:function(){e.updateLocationType(t)},title:"提醒",text:"确定要将".concat(t.studentName,"的定位修改为正常吗？修改后将无法变更。")}},updateLocationType:function(t){var e=this;this.$store.commit("admin/SET_LOADING",!0),this.$store.dispatch("admin/UPDATE_LOCATIONFYPE",{data:{locationType:2,coursePlanId:t.id},cb:function(t){"success"===t.msg&&(e.$message.success("操作成功"),e.getData()),e.$store.commit("admin/SET_LOADING",!1)}})},setLocation:function(){var t=this;0!=this.point.lng?(this.$store.commit("admin/SET_LOADING",!0),this.$store.dispatch("admin/SET_LOCATION",{data:l({attendancePlanId:this.course.id},this.point),cb:function(e){"success"===e.msg&&t.$message.success("定位信息设置成功"),t.$store.commit("admin/SET_LOADING",!1)}})):setTimeout(this.setLocation,500)},getCode:function(){var t=this;""==this.code&&console.log("first get code"),""==this.code&&this.$store.commit("admin/SET_LOADING",!0),this.$store.dispatch("admin/PUSH_COURSE_CODE",{data:{attendancePlanId:this.course.id},cb:function(e){"success"===e.msg&&(t.code=e.data.courseCode,t.getData(),""==t.code&&(t.timeSet.show=2==e.data.timeType),t.timeSet.show||(clearTimeout(t.getCodeSt),t.getCodeSt=setTimeout(t.getCode,1e3*t.timeSet.refreshTime))),t.$store.commit("admin/SET_LOADING",!1)}})},getData:function(){var t=this;this.timeSet.show||(clearInterval(this.getDataSt),this.getDataSt=setTimeout(this.getData,1e4),this.$store.dispatch("admin/FIND_ONE_COURSE",{data:{attendancePlanId:this.course.id},cb:function(e){"success"===e.msg&&(t.list=e.data,t.$store.commit("admin/SET_LOADING",!1))}}))}}},m=(n(918),n(23)),component=Object(m.a)(d,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"h5-page"},[o("van-nav-bar",{attrs:{title:"签到情况","left-arrow":"","right-text":"设置时间参数"},on:{"click-left":function(e){return t.$router.go(-1)},"click-right":function(e){t.timeSet.show=!0}}}),t._v(" "),o("div",{staticClass:"box-bg box-imgbg2"},[o("div",{staticClass:"course-info"},[o("img",{attrs:{src:n(916),alt:""}}),t._v(" "),o("div",[t._v("\n          "+t._s(t.util.dateFtt("yyyy/MM/dd",new Date(t.course.startTime)))),o("br"),t._v("\n          "+t._s(t.course.courseName)),o("br"),t._v("\n          "+t._s(t.course.classroomName)+"\n          第"+t._s(t.course.startSession)+"~"+t._s(t.course.endSession)+"节"),o("br"),t._v(" "),o("strong",[t._v("课程码："+t._s(t.code))])]),t._v(" "),o("img",{staticStyle:{transform:"rotateY(180deg)"},attrs:{src:n(917),alt:""}})]),t._v(" "),o("div",{staticClass:"sign-info"},[o("strong",[t._v("\n          签到情况\n          "),o("span",{staticStyle:{"font-weight":"normal"}},[t._v("\n            （"+t._s(t.list.filter((function(t){return 0!=t.attendanceState})).length)+"/"+t._s(t.list.length)+"）\n          ")])]),t._v(" "),o("div",{staticClass:"sign-list"},t._l(t.list,(function(e,i){return o("span",{key:i},[t._v("\n            "+t._s(e.studentName+" "+e.studentNumber+" ")+"\n            "+t._s(0!=e.attendanceState?t.util.dateFtt("hh:mm:ss",new Date(e.cardTime)):"")+"\n            "),0!=e.attendanceState?o("van-icon",{class:1==e.locationType?"warning":"success",attrs:{name:"location-o"}}):t._e(),t._v(" "),1===e.attendanceState?o("van-icon",{attrs:{name:"success"}}):t._e(),t._v(" "),2===e.attendanceState?o("van-icon",{staticClass:"late",attrs:{name:"success"}}):t._e(),t._v(" "),1==e.locationType&&0!=e.attendanceState?o("div",{staticClass:"button",on:{click:function(n){return t.confrimULT(e)}}},[t._v("处理定位")]):t._e()],1)})),0)])]),t._v(" "),t.timeSet.show?o("div",{staticClass:"box-bg",staticStyle:{background:"#686868"}},[o("div",{staticClass:"box-center-mid set-course-time"},[o("strong",[t._v("课程码时间设置")]),t._v(" "),o("span",[t._v("课程开始后")]),t._v(" "),o("van-stepper",{staticStyle:{display:"inline-block","vertical-align":"middle"},attrs:{min:"0",max:"45"},model:{value:t.timeSet.value,callback:function(e){t.$set(t.timeSet,"value",e)},expression:"timeSet.value"}}),t._v(" "),o("span",[t._v("分钟内，可签到。")]),o("br"),t._v(" "),o("span",[t._v("课程码刷新时间")]),t._v(" "),o("van-stepper",{staticStyle:{display:"inline-block","vertical-align":"middle"},attrs:{min:"0",max:"50"},model:{value:t.timeSet.refreshTime,callback:function(e){t.$set(t.timeSet,"refreshTime",e)},expression:"timeSet.refreshTime"}}),t._v(" "),o("span",[t._v("秒。")]),t._v(" "),o("div",{staticStyle:{"margin-top":"1rem","text-align":"right"}},[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.setTime}},[t._v("确定")])],1)],1)]):t._e(),t._v(" "),o("el-confrim",{attrs:{confrimInfo:t.confrimInfo}})],1)}),[],!1,null,"3b4f7eb6",null);e.default=component.exports}}]);